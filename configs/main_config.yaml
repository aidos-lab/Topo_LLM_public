defaults:
  # - data: bbc
  # - data: iclr_2024_submissions
  # - data: multiwoz21_validation
  - data: one-year-of-tsla-on-reddit
  # - data: sgd
  # - data: wikitext
  - embeddings: basic_embeddings
  - finetuning: finetuning
  - inference: default
  # - language_model: bert-base-uncased_finetuned-on-xsum_ftm-standard
  # - language_model: gpt2-large
  # - language_model: gpt2-medium
  # - language_model: gpt2-medium_finetuned-on-multiwoz21_ftm-standard
  # - language_model: gpt2-medium_finetuned-on-one-year-of-tsla-on-reddit_ftm-standard
  - language_model: roberta-base
  # - language_model: roberta-base_finetuned-on-wikitext_ftm-lora
  # - language_model: roberta-base_finetuned-on-multiwoz21_ftm-lora
  # - language_model: roberta-base_finetuned-on-multiwoz21_ftm-standard
  # - language_model: roberta-base_finetuned-on-multiwoz21-train_context-dialogue
  # - language_model: roberta-base_finetuned-on-multiwoz21-train-and-sgd-train_context-dialogue
  # - language_model: roberta-base_finetuned-on-multiwoz21-train-5000_context-utterance_ep-3
  # - language_model: roberta-base_finetuned-on-multiwoz21-train-5000_context-utterance_ep-5
  # - language_model: roberta-base_finetuned-on-one-year-of-tsla-on-reddit_ftm-standard
  # - language_model: roberta-base_finetuned-on-wikitext_ftm-standard
  # - language_model: roberta-base_finetuned-on-wikitext_ftm-lora
  - paths: absolute_repository_base
  - storage: zarr_vectors_pickle_metadata
  - tokenizer: basic_tokenizer
  - transformations: none
  - override hydra/job_logging: custom
  - _self_

embeddings_data_prep:
  num_samples: 30000

seed: 1234
verbosity: 1
preferred_torch_backend: auto

#------------------------- Hydra Config ------------------------#
# Instructions for setting up the output directory paths:
# https://hydra.cc/docs/configure_hydra/workdir/
#
# Workaround for taking care of slashes '/' in 'hydra.job.override_dirname'
# by adding an OmegaConf resolver 'sanitize_override_dirname':
# https://github.com/facebookresearch/hydra/discussions/2409
#
# Note that %Z (for the time zone) does not appear to work in the 'now' handler function

hydra:
  run:
    dir: ${paths.repository_base_path}/hydra_output_dir/run/${hydra.job.name}/${now:%Y-%m-%d}/${now:%H-%M-%S}/${sanitize_override_dirname:${hydra.job.override_dirname}}/seed=${seed}/
  sweep:
    dir: ${paths.repository_base_path}/hydra_output_dir/multirun/${hydra.job.name}/${now:%Y-%m-%d}/${now:%H-%M-%S}/
    subdir: ${sanitize_override_dirname:${hydra.job.override_dirname}}/seed=${seed}
  job:
    chdir: False
    env_set:
      # HYDRA_FULL_ERROR: 1 # NOTE: This will not work for setting the environment variable, set in code instead
      # CUDA_VISIBLE_DEVICES: 0
      CUDA_VISIBLE_DEVICES: 1
    config:
      override_dirname:
        exclude_keys:
          - seed